<script>
// @todo update & delete
// @todo crud orders & articles
// @todo integrate forms
// @todo contenteditable
</script>

<!DOCTYPE html>

<html>

<head>
    <meta charset='utf-8'>

    <title></title>

    <script src="/js/jquery.js"></script>
    <script src="/js/orders.js"></script>

    <script>
        var int;

        $(document).ready(function () {
            "use strict";

            var order = new Order();
            order.getList();

            $('#custCancel').on('click', function () {
                $('div#customer').toggle();
            });
            $('#custForm').on('submit', function (e) {
                e.preventDefault();

                var progress = function () {
                    var value = $('#progress').val();
                    if (value <= 99) {
                        value += 1;
                    } else {
                        value = 0;
                        clearInterval(int);
                        saveCustomer();
                    }
                    $('#progress').val(value);
                }
                int = setInterval(progress, 20);

                return false;
            });

            var saveCustomer = function () {
                var values = {
                    name: $('#custName').val(),
                    firstname: $('#custFirstname').val(),
                    surname: $('#custSurname').val(),
                    street: $('#custStreet').val(),
                    place: $('#custPlace').val(),
                    country: $('#custCountry').val()
                };

                $.ajax({
                    url: '/customers',
                    type: 'POST',
                    data: values
                }).done(function (res) {
                    $('div.popup').hide();
                    $('#content').empty();
                    order.getList();
                });
            };

            // update

            // delete


            $('#fullScreen').on('click', function (e) {
                var el = document.documentElement,
                    requestFullScreen = el.requestFullScreen ||
                            el.webkitRequestFullScreen ||
                            el.mozRequestFullScreen;

                requestFullScreen.call(el);
            });
        });
    </script>

    <style type="text/css">

        .hidden {
            display: none;
        }

        .popup {
            position: absolute;
            top: 100px;
            left: 100px;
            height: 400px;
            width: 400px;
            background: #add8e6;
        }

    </style>


</head>

<body>

    <button id="fullScreen">Full Screen</button>


    <h1>ACME - Auftragsverwaltung</h1>

    <section id="content"></section>

    <aside>
        <input type="button" value="neuer Kunde" id="newCustomer" />
        <input type="button" value="neuer Auftrag" id="newOrder" />
        <input type="button" value="neuer Artikel" id="newArticle" />
    </aside>

    ${customer}
    ${order}
    ${article}


</body>

</html>